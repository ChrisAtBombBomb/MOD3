/**
*
*   MOD3.js
*   @version: 0.5.0
*   @dependencies: Classy.js
*
*   MOD3 3D Modifier Library for JavaScript 
*   port of AS3DMod ActionScript3 library (http://code.google.com/p/as3dmod/)
*   https://github.com/foo123/MOD3
*
**/!function(t,e,r){"use strict";var n;"object"==typeof module&&module.exports?module.exports=r.call(t,{}):"undefined"!=typeof System&&"function"==typeof System.register&&"function"==typeof System["import"]?System.register(e,[],function(n){n(e,r.call(t,{}))}):"function"==typeof define&&define.amd&&"function"==typeof require&&"function"==typeof require.specified&&require.specified(e)?define(e,["require","exports","module"],function(){return r.call(t,{})}):e in t||(t[e]=n=r.call(t,{}))&&"function"==typeof define&&define.amd&&define(function(){return n})}(this,"MOD3",function(t){var e=t.MOD3={VERSION:"0.5.0",Class:Classy.Class,StaticClass:function(t){return Classy.Class(Classy.STATIC,t)}};return!function(t,e){"use strict";t.Constants={PI:Math.PI,invPI:1/Math.PI,halfPI:.5*Math.PI,doublePI:2*Math.PI,toRad:Math.PI/180,toDeg:180/Math.PI},t.ModConstant={NONE:0,LEFT:-1,RIGHT:1,X:1,Y:2,Z:4,Xi:0,Yi:1,Zi:2},t.Array32F="undefined"!=typeof Float32Array?Float32Array:Array,t.Array64F="undefined"!=typeof Float64Array?Float64Array:Array,t.Array8I="undefined"!=typeof Int8Array?Int8Array:Array,t.Array16I="undefined"!=typeof Int16Array?Int16Array:Array,t.Array32I="undefined"!=typeof Int32Array?Int32Array:Array,t.Array8U="undefined"!=typeof Uint8Array?Uint8Array:Array,t.Array16U="undefined"!=typeof Uint16Array?Uint16Array:Array,t.Array32U="undefined"!=typeof Uint32Array?Uint32Array:Array,t.VecArray=t.Array32F}(e),!function(t,e){"use strict";var r,n=t.Constants.toRad,i=t.Constants.toDeg,s=(Math.min,Math.max,Math.pow),o=Math.round,u=Math.floor,a=Math.ceil,c=t.XMath=t.StaticClass({normalize:function(t,e,n){var i=e-t;return 0===i?1:r(0,1,(n-t)/e)},toRange:function(t,e,r){var n=e-t;return 0===n?0:t+n*r},inRange:function(t,e,r,n){return!1!==n?r>=t&&e>=r:r>t&&e>r},sign:function(t,e){return 0==t?e||0:t>0?1:-1},trim:function(t,e,r){return t>r?t:r>e?e:r},wrap:function(t,e,r){var n=e-t;return t>r?r+n:r>=e?r-n:r},degToRad:function(t){return t*n},radToDeg:function(t){return t*i},presicion:function(t,e){var r=s(10,e);return o(t*r)/r},uceil:function(t){return 0>t?u(t):a(t)}});r=c.clamp=c.trim}(e),!function(t,e){"use strict";var r=t.XMath.normalize,n=t.XMath.toRange,i=t.XMath.trim;t.Range=t.Class({constructor:function(t,e){var r=this;r.start=null!=t?t:0,r.end=null!=e?e:1},name:"Range",start:0,end:1,dispose:function(){var t=this;return t.start=null,t.end=null,t},getSize:function(){return this.end-this.start},move:function(t){this.start+=t,this.end+=t},isIn:function(t){return t>=this.start&&t<=this.end},normalize:function(t){return r(this.start,this.end,t)},toRange:function(t){return n(this.start,this.end,t)},trim:function(t){return i(this.start,this.end,t)},interpolate:function(t,e){return n(this.start,this.end,e.normalize(t))},toString:function(){return"["+this.start+" - "+this.end+"]"}})}(e),!function(t,e){"use strict";var r=Math.sin,n=Math.abs;t.Phase=t.Class({constructor:function(t){this.value=0,null!=t&&(this.value=t)},name:"Phase",value:0,dispose:function(){return this.value=null,this},getPhasedValue:function(){return r(this.value)},getAbsPhasedValue:function(){return n(r(this.value))},getNormValue:function(){return.5*(r(this.value)+1)}})}(e),!function(t,e){"use strict";var r=t.Point=t.Class({constructor:function(t,e){var r=this;r.x=null==t?0:t,r.y=null==e?0:e},name:"Point",x:0,y:0,dispose:function(){var t=this;return t.x=null,t.y=null,t},clone:function(){return new r(this.x,this.y)}})}(e),!function(t,e){"use strict";var r=Math.sin,n=Math.cos,i=t.Point,s=t.Matrix=t.Class({constructor:function(t,r,n,i){var s=this;s.m11=t===e?1:t,s.m12=r===e?0:r,s.m21=n===e?0:n,s.m22=i===e?1:i},name:"Matrix",m11:1,m12:0,m21:0,m22:1,dispose:function(){var t=this;return t.m11=null,t.m12=null,t.m21=null,t.m22=null,t},reset:function(){var t=this;return t.m11=1,t.m12=0,t.m21=0,t.m22=1,t},rotate:function(t){var e=this,i=n(t),s=r(t);return e.m11=i,e.m12=-s,e.m21=s,e.m22=i,e},scale:function(t,r){var n=this;return n.m12=0,n.m21=0,n.m11=1,n.m22=1,t!==e&&(n.m11=t,n.m22=t),r!==e&&(n.m22=r),n},multiply:function(t){var e=this,r=e.m11,n=e.m12,i=e.m21,s=e.m22,o=t.m11,u=t.m12,a=t.m21,c=t.m22;return e.m11=r*o+n*a,e.m12=r*u+n*c,e.m21=i*o+s*a,e.m22=i*u+s*c,e},transformPoint:function(t){var e=this,r=t.x,n=t.y,s=e.m11*r+e.m12*n,o=e.m21*r+e.m22*n;return new i(s,o)},transformPointSelf:function(t){var e=this,r=t.x,n=t.y;return t.x=e.m11*r+e.m12*n,t.y=e.m21*r+e.m22*n,t},clone:function(){return new s(this.m11,this.m12,this.m21,this.m22)}})}(e),!function(t,e){"use strict";var r=Math.sqrt,n=t.VecArray,i=t.Vector3=t.Class({__static__:{ZERO:function(){return new i([0,0,0])},dot:function(t,e){var r=t.xyz,n=e.xyz;return r[0]*n[0]+r[1]*n[1]+r[2]*n[2]},equals:function(t,e){var r=t.xyz,n=e.xyz;return r[0]===n[0]&&r[1]===n[1]&&r[2]===n[2]},cross:function(t,e){var r=t.xyz,n=e.xyz,s=r[0],o=r[1],u=r[2],a=n[0],c=n[1],l=n[2];return new i([o*l-u*c,u*a-s*l,s*c-o*a])},distance:function(t,e){var n=t.xyz,i=e.xyz,s=n[0]-i[0],o=n[1]-i[1],u=n[2]-i[2];return r(s*s+o*o+u*u)},sum:function(t,e){var r=t.xyz,n=e.xyz;return new i([r[0]+n[0],r[1]+n[1],r[2]+n[2]])}},constructor:function(t,r,i){t&&t.length?this.xyz=new n([t[0],t[1],t[2]]):(t=t===e?0:t,r=r===e?0:r,i=i===e?0:i,this.xyz=new n([t,r,i]))},name:"Vector3",xyz:null,dispose:function(){return this.xyz=null,this},getXYZ:function(){return new n(this.xyz)},getXYZRef:function(){return this.xyz},setXYZ:function(t){return this.xyz=new n(t),this},setXYZRef:function(t){return this.xyz=t,this},clone:function(){return new i(this.xyz)},equalsSelf:function(t){var e=this.xyz,r=t.xyz;return e[0]===r[0]&&e[1]===r[1]&&e[2]===r[2]},zeroSelf:function(){this.xyz;return a[0]=0,a[1]=0,a[2]=0,this},negate:function(){var t=this.xyz;return new i([-t[0],-t[1],-t[2]])},negateSelf:function(){var t=this.xyz;return t[0]=-t[0],t[1]=-t[1],t[2]=-t[2],this},add:function(t){var e=this.xyz,r=t.xyz;return new i([e[0]+r[0],e[1]+r[1],e[2]+r[2]])},addSelf:function(t){var e=this.xyz,r=t.xyz;return e[0]+=r[0],e[1]+=r[1],e[2]+=r[2],this},subtract:function(t){var e=this.xyz,r=t.xyz;return new i([e[0]-r[0],e[1]-r[1],e[2]-r[2]])},subtractSelf:function(t){var e=this.xyz,r=t.xyz;return e[0]-=r[0],e[1]-=r[1],e[2]-=r[2],this},multiplyScalar:function(t){var e=this.xyz;return new i([e[0]*t,e[1]*t,e[2]*t])},multiplyScalarSelf:function(t){var e=this.xyz;return e[0]*=t,e[1]*=t,e[2]*=t,this},multiply:function(t){var e=this.xyz,r=t.xyz;return new i([e[0]*r[0],e[1]*r[1],e[2]*r[2]])},multiplySelf:function(t){var e=this.xyz,r=t.xyz;return e[0]*=r[0],e[1]*=r[1],e[2]*=r[2],this},divide:function(t){var e=this.xyz;return new i([e[0]/t,e[1]/t,e[2]/t])},divideSelf:function(t){var e=this.xyz;return e[0]/=t,e[1]/=t,e[2]/=t,this},normalize:function(){var t,e=this.xyz,n=e[0],s=e[1],o=e[2],u=n*n+s*s+o*o;return u>0&&(t=1/r(u),n*=t,s*=t,o*=t),new i([n,s,o])},normalizeSelf:function(){var t,e=this.xyz,n=e[0],i=e[1],s=e[2],o=n*n+i*i+s*s;return o>0&&(t=1/r(o),n*=t,i*=t,s*=t),e[0]=n,e[1]=i,e[2]=s,this},getMagnitude:function(){var t=this.xyz,e=t[0],n=t[1],i=t[2];return r(e*e+n*n+i*i)},setMagnitude:function(t){this.normalizeSelf();var e=this.xyz;return e[0]*=t,e[1]*=t,e[2]*=t,this},dotSelf:function(t){var e=this.xyz,r=t.xyz;return e[0]*r[0]+e[1]*r[1]+e[2]*r[2]},crossSelf:function(t){var e=this.xyz,r=t.xyz,n=e[0],i=e[1],s=e[2],o=r[0],u=r[1],a=r[2];return e[0]=i*a-s*u,e[1]=s*o-n*a,e[2]=n*u-i*o,this},distanceSelf:function(t){var e=this.xyz,n=t.xyz,i=e[0]-n[0],s=e[1]-n[1],o=e[2]-n[2];return r(i*i+s*s+o*o)},toString:function(){return"["+this.xyz[0]+" , "+this.xyz[1]+" , "+this.xyz[2]+"]"}})}(e),!function(t,e){"use strict";var r=Math.sin,n=Math.cos,i=t.Matrix4=t.Class({__static__:{multiplyVector:function(t,e){var r=e.xyz,n=r[0],i=r[1],s=r[2];return r[0]=n*t.n11+i*t.n12+s*t.n13+t.n14,r[1]=n*t.n21+i*t.n22+s*t.n23+t.n24,r[2]=n*t.n31+i*t.n32+s*t.n33+t.n34,e},calculateMultiply:function(t,e){var r=t.n11,n=e.n11,i=t.n21,s=e.n21,o=t.n31,u=e.n31,a=t.n12,c=e.n12,l=t.n22,f=e.n22,h=t.n32,v=e.n32,x=t.n13,d=e.n13,m=t.n23,y=e.n23,p=t.n33,g=e.n33,V=t.n14,M=e.n14,w=t.n24,z=e.n24,X=t.n34,C=e.n34;return t.n11=r*n+a*s+x*u,t.n12=r*c+a*f+x*v,t.n13=r*d+a*y+x*g,t.n14=r*M+a*z+x*C+V,t.n21=i*n+l*s+m*u,t.n22=i*c+l*f+m*v,t.n23=i*d+l*y+m*g,t.n24=i*M+l*z+m*C+w,t.n31=o*n+h*s+p*u,t.n32=o*c+h*f+p*v,t.n33=o*d+h*y+p*g,t.n34=o*M+h*z+p*C+X,t}},constructor:function(t,r,n,i,s,o,u,a,c,l,f,h,v,x,d,m){var y=this;y.n11=t===e?1:t,y.n12=r===e?0:r,y.n13=n===e?0:n,y.n14=i===e?0:i,y.n21=s===e?0:s,y.n22=o===e?1:o,y.n23=u===e?0:u,y.n24=a===e?0:a,y.n31=c===e?0:c,y.n32=l===e?0:l,y.n33=f===e?1:f,y.n34=h===e?0:h,y.n41=v===e?0:v,y.n42=x===e?0:x,y.n43=d===e?0:d,y.n44=m===e?1:m},name:"Matrix4",n11:1,n12:0,n13:0,n14:0,n21:0,n22:1,n23:0,n24:0,n31:0,n32:0,n33:1,n34:0,n41:0,n42:0,n43:0,n44:1,dispose:function(){var t=this;return t.n11=null,t.n12=null,t.n13=null,t.n14=null,t.n21=null,t.n22=null,t.n23=null,t.n24=null,t.n31=null,t.n32=null,t.n33=null,t.n34=null,t.n41=null,t.n42=null,t.n43=null,t.n44=null,t},reset:function(){var t=this;return t.n11=1,t.n12=0,t.n13=0,t.n14=0,t.n21=0,t.n22=1,t.n23=0,t.n24=0,t.n31=0,t.n32=0,t.n33=1,t.n34=0,t.n41=0,t.n42=0,t.n43=0,t.n44=1,t},translationMatrix:function(t,e,r){var n=this;return n.n14=t,n.n24=e,n.n34=r,n},translationMatrixFromVector:function(t){return this.translationMatrix(t.xyz[0],t.xyz[1],t.xyz[2])},scaleMatrix:function(t,e,r){var n=this;return n.n11=t,n.n22=e,n.n33=r,n},scaleMatrixFromVector:function(t){return this.scaleMatrix(t.xyz[0],t.xyz[1],t.xyz[2])},rotationMatrix:function(t,e,i,s){var o=this,u=n(s),a=r(s),c=1-u,l=t*e*c,f=e*i*c,h=t*i*c,v=a*i,x=a*e,d=a*t;return o.n11=u+t*t*c,o.n12=-v+l,o.n13=x+h,o.n14=0,o.n21=v+l,o.n22=u+e*e*c,o.n23=-d+f,o.n24=0,o.n31=-x+h,o.n32=d+f,o.n33=u+i*i*c,o.n34=0,o},rotationMatrixFromVector:function(t,e){return this.rotationMatrix(t.xyz[0],t.xyz[1],t.xyz[2],e)},multiply:function(t){return i.calculateMultiply(this,t)},multiplyVector:function(t){return i.multiplyVector(this,t)}})}(e),!function(t,e){"use strict";t.List={operate:function(t,e,r,n,i,s){var o=t.length;if(arguments.length<5&&(i=o-1),0>i&&(i+=o),arguments.length<4&&(n=0),n>i)return r;if(!0===s){var u,a,c=i-n+1,l=c-1,f=15&c,h=1&f,v=l-f,x=h?e(r,t[i],i):r;for(u=l-h;u>v;u-=2)a=n+u,x=e(e(x,t[a],a),t[a-1],a-1);for(u=v;u>=0;u-=16)a=n+u,x=e(e(e(e(e(e(e(e(e(e(e(e(e(e(e(e(x,t[a],a),t[a-1],a-1),t[a-2],a-2),t[a-3],a-3),t[a-4],a-4),t[a-5],a-5),t[a-6],a-6),t[a-7],a-7),t[a-8],a-8),t[a-9],a-9),t[a-10],a-10),t[a-11],a-11),t[a-12],a-12),t[a-13],a-13),t[a-14],a-14),t[a-15],a-15)}else{var u,a,c=i-n+1,f=15&c,h=1&f,x=h?e(r,t[n],n):r;for(u=h;f>u;u+=2)a=n+u,x=e(e(x,t[a],a),t[a+1],a+1);for(u=f;c>u;u+=16)a=n+u,x=e(e(e(e(e(e(e(e(e(e(e(e(e(e(e(e(x,t[a],a),t[a+1],a+1),t[a+2],a+2),t[a+3],a+3),t[a+4],a+4),t[a+5],a+5),t[a+6],a+6),t[a+7],a+7),t[a+8],a+8),t[a+9],a+9),t[a+10],a+10),t[a+11],a+11),t[a+12],a+12),t[a+13],a+13),t[a+14],a+14),t[a+15],a+15)}return x},each:function(t,e,r,n,i){if(null==t||!t.length)return t;var s=t.length;if(arguments.length<4&&(n=s-1),0>n&&(n+=s),arguments.length<3&&(r=0),r>n)return t;var o,u,a,c,l,f,h=n-r+1;if(!0===i){for(a=h-1,l=15&h,f=1&l,c=a-l,f&&e(t[n]),o=a-f;o>c;o-=2)u=r+o,e(t[u]),e(t[u-1]);for(o=c;o>=0;o-=16)u=r+o,e(t[u]),e(t[u-1]),e(t[u-2]),e(t[u-3]),e(t[u-4]),e(t[u-5]),e(t[u-6]),e(t[u-7]),e(t[u-8]),e(t[u-9]),e(t[u-10]),e(t[u-11]),e(t[u-12]),e(t[u-13]),e(t[u-14]),e(t[u-15])}else{for(l=15&h,f=1&l,f&&e(t[r]),o=f;l>o;o+=2)u=r+o,e(t[u]),e(t[u+1]);for(o=l;h>o;o+=16)u=r+o,e(t[u]),e(t[u+1]),e(t[u+2]),e(t[u+3]),e(t[u+4]),e(t[u+5]),e(t[u+6]),e(t[u+7]),e(t[u+8]),e(t[u+9]),e(t[u+10]),e(t[u+11]),e(t[u+12]),e(t[u+13]),e(t[u+14]),e(t[u+15])}return t}}}(e),!function(t,e){"use strict";var r=t.ModConstant,n=r.X,i=r.Y,s=r.Z,o=t.Vector3,u=t.VecArray;t.VertexProxy=t.Class({constructor:function(t){var e=this;e.xyz=new u([0,0,0]),e.original=new u([0,0,0]),e.ratio=new u([0,0,0]),null!=t&&e.setVertex(t)},name:"VertexProxy",vertex:null,xyz:null,original:null,ratio:null,dispose:function(){var t=this;return t.vertex=null,t.xyz=null,t.original=null,t.ratio=null,t},setVertex:function(t){var e=this;return e.vertex=t,e},getRatioVector:function(){return new o(this.ratio)},getRatio:function(t){var e=this.ratio;return n===t?e[0]:i===t?e[1]:s===t?e[2]:-1},getOriginalValue:function(t){var e=this.original;return n===t?e[0]:i===t?e[1]:s===t?e[2]:0},setRatios:function(t,r,n){var i=this;return t=t===e?0:t,r=r===e?0:r,n=n===e?0:n,i.ratio=new u([t,r,n]),i},setOriginalPosition:function(t,r,n){var i=this;return t=t===e?0:t,r=r===e?0:r,n=n===e?0:n,i.original=new u([t,r,n]),i},getXYZ:function(){return new u(this.xyz)},getXYZRef:function(){return this.xyz},getX:function(){return this.xyz[0]},getY:function(){return this.xyz[1]},getZ:function(){return this.xyz[2]},setXYZ:function(t){var e=this;return e.xyz=new u(t),e},setXYZRef:function(t){var e=this;return e.xyz=t,e},setX:function(t){var e=this;return e.xyz[0]=t,e},setY:function(t){var e=this;return e.xyz[1]=t,e},setZ:function(t){var e=this;return e.xyz[2]=t,e},getValue:function(t){var e=this;return n===t?e.getX():i===t?e.getY():s===t?e.getZ():0},setValue:function(t,e){var r=this;return n===t?r.setX(e):i===t?r.setY(e):s===t&&r.setZ(e),r},reset:function(){var t=this;return t.setXYZ(t.original),t},collapse:function(){var t=this;return t.original=t.getXYZ(),t},getVector:function(){return new o(this.getXYZ())},setVector:function(t){this.setXYZ(t.xyz)}})}(e),!function(t,e){"use strict";t.FaceProxy=t.Class({constructor:function(){this.vertices=[]},name:"FaceProxy",vertices:null,dispose:function(){var t=this;return t.vertices=null,t},addVertex:function(t){this.vertices.push(t)},getVertices:function(){return this.vertices}})}(e),!function(t,e){"use strict";var r=t.ModConstant,n=r.X,i=r.Y,s=r.Z,o=Math.min,u=Math.max,a=t.List.each,c=function(t){t.dispose()},l=function(t){t.reset()},f=function(t){t.collapse()};t.MeshProxy=t.Class({constructor:function(t){var e=this;e.maxX=null,e.maxY=null,e.maxZ=null,e.minX=null,e.minY=null,e.minZ=null,e.maxAxis=null,e.midAxis=null,e.minAxis=null,e.width=null,e.height=null,e.depth=null,e.vertices=[],e.faces=[],e.mesh=null,null!=t&&e.setMesh(t)},name:"MeshProxy",maxX:null,maxY:null,maxZ:null,minX:null,minY:null,minZ:null,maxAxis:null,midAxis:null,minAxis:null,width:null,height:null,depth:null,vertices:null,faces:null,mesh:null,dispose:function(){var t=this;return t.maxX=null,t.maxY=null,t.maxZ=null,t.minX=null,t.minY=null,t.minZ=null,t.maxAxis=null,t.midAxis=null,t.minAxis=null,t.width=null,t.height=null,t.depth=null,t.disposeFaces(),t.disposeVertices(),t.mesh=null,t},disposeVertices:function(){var t=this;return a(t.vertices,c),t.vertices=null,t},disposeFaces:function(){var t=this;return a(t.faces,c),t.faces=null,t},setMesh:function(t){var e=this;return e.mesh=t,e.vertices=[],e},getVertices:function(){return this.vertices},getFaces:function(){return this.faces},analyzeGeometry:function(){var t,e,r=this,c=r.vertices,l=1/0,f=1/0,h=1/0,v=-(1/0),x=-(1/0),d=-(1/0),m=0,y=0,p=0;return a(c,function(t){var e=t.getXYZ(),r=e[0],n=e[1],i=e[2];l=o(l,r),f=o(f,n),h=o(h,i),v=u(v,r),x=u(x,n),d=u(d,i),t.setOriginalPosition(r,n,i)}),m=v-l,y=x-f,p=d-h,r.width=m,r.height=y,r.depth=p,r.minX=l,r.maxX=v,r.minY=f,r.maxY=x,r.minZ=h,r.maxZ=d,t=u(m,y,p),e=o(m,y,p),t===m&&e===y?(r.minAxis=i,r.midAxis=s,r.maxAxis=n):t===m&&e===p?(r.minAxis=s,r.midAxis=i,r.maxAxis=n):t===y&&e===m?(r.minAxis=n,r.midAxis=s,r.maxAxis=i):t===y&&e===p?(r.minAxis=s,r.midAxis=n,r.maxAxis=i):t===p&&e===m?(r.minAxis=n,r.midAxis=i,r.maxAxis=s):t===p&&e===y&&(r.minAxis=i,r.midAxis=n,r.maxAxis=s),a(c,function(t){var e=t.getXYZ();t.setRatios((e[0]-l)/m,(e[1]-f)/y,(e[2]-h)/p)}),r},resetGeometry:function(){var t=this;return a(t.vertices,l),t.update(),t},collapseGeometry:function(){var t=this;return a(t.vertices,f),t.update().analyzeGeometry(),t},getMin:function(t){var e=this;return n===t?e.minX:i===t?e.minY:s===t?e.minZ:-1},getMax:function(t){var e=this;return n===t?e.maxX:i===t?e.maxY:s===t?e.maxZ:-1},getSize:function(t){var e=this;return n===t?e.width:i===t?e.height:s===t?e.depth:-1},update:function(){return this},postApply:function(){return this},updateMeshPosition:function(t){return this}})}(e),!function(t,e){"use strict";var r=0,n=t.ModConstant.NONE;t.Modifier=t.Class({constructor:function(t){var e=this;e.id=++r,e.name="Modifier",e.mod=t||null,e.axes=n,e.constraint=n,e.enabled=!0},id:null,name:"Modifier",mod:null,axes:null,constraint:null,enabled:!0,dispose:function(t){var e=this;return!0===t&&e.mod&&e.mod.dispose(),e.mod=null,e.name=null,e.axes=null,e.constraint=null,e},enable:function(t){return arguments.length?(this.enabled=!!t,this):this.enabled},constraintAxes:function(t){return this.axes=t||n,this},setConstraint:function(t){return this.constraint=t||n,this},setModifiable:function(t){return this.mod=t,this},getVertices:function(){return this.mod?this.mod.getVertices():null},apply:function(){return this},toString:function(){return"[Modifier "+this.name+"]"}})}(e),!function(t,e){"use strict";t.Library3d=t.Class({constructor:function(){var e=this;e.id="Library3d",e.meshClass=t.MeshProxy,e.vertexClass=t.VertexProxy},id:"Library3d",meshClass:null,vertexClass:null}),t.Factory=t.StaticClass({getMeshProxy:function(t){if(arguments.length){var e=t.meshClass;return e?new e:null}return null},getModifier:function(e){return e&&e.modifier&&t[e.modifier]?new t[e.modifier]:null},getLibrary:function(e){return e&&e.library&&t[e.library]?new t[e.library]:new t.Library3d},getMesh:function(e){return e&&e.mesh&&t[e.mesh]?(new t.MeshProxy).unserialize(e):new t.MeshProxy},getVertex:function(e){return e&&e.vertex&&t[e.vertex]?(new t.VertexProxy).unserialize(e):new t.VertexProxy}})}(e),!function(t,e){"use strict";var r=t.Factory.getMeshProxy,n=t.ModifierStack=t.Class({constructor:function(t,e){var n=this;n.mod=null,n.stack=[],n.lib3d=t,n.mod=r(n.lib3d),e&&(n.mod.setMesh(e),n.mod.analyzeGeometry())},name:"ModifierStack",lib3d:null,mod:null,stack:null,dispose:function(t){var e=this;if(e.lib3d=null,t&&e.stack)for(;e.stack.length;)e.stack.pop().dispose();return e.stack=null,e.mod&&e.mod.dispose(),e.mod=null,e},setModifiable:function(t){var e=this;return e.mod=t,e},add:function(t){var e=this;return t&&(t.setModifiable(e.mod),e.stack.push(t)),e},apply:function(){var t=this;if(t.mod&&t.stack&&t.stack.length){var e,r=t.stack,n=r.length,i=t.mod;for(i.resetGeometry(),e=0;n>e;e++)r[e].enabled&&r[e].apply();i.update()}return t},collapse:function(){var t=this;return t.mod&&t.stack&&t.stack.length&&(t.apply(),t.mod.collapseGeometry(),t.stack.length=0),t},clear:function(){var t=this;return t.stack&&(t.stack.length=0),t},getMeshInfo:function(){return this.mod}});n.prototype.addModifier=n.prototype.add}(e),!function(t,e){"use strict";var r=t.Vector3,n=t.List.each;t.Pivot=t.Class(t.Modifier,{constructor:function(t,e,n){var i=this;i.$super("constructor"),i.name="Pivot",i.pivot=new r([t||0,e||0,n||0])},pivot:null,dispose:function(){var t=this;return t.pivot.dispose(),t.pivot=null,t.$super("dispose"),t},setMeshCenter:function(){var t=this,e=t.mod;return t.pivot=new r(-(e.minX+.5*e.width),-(e.minY+.5*e.height),-(e.minZ+.5*e.depth)),t},apply:function(){var t=this,e=t.pivot;return n(t.mod.vertices,function(t){t.setVector(t.getVector().addSelf(e))}),t.mod.updateMeshPosition(e.negate()),t}})}(e),!function(t,e){"use strict";var r=t.ModConstant.NONE,n=t.ModConstant.LEFT,i=t.ModConstant.RIGHT,s=t.Matrix,o=Math.atan,u=(Math.atan2,Math.sin),a=Math.cos,c=t.Constants.PI,l=t.Constants.halfPI,f=t.Constants.doublePI,h=t.Point,v=t.List.each;t.Bend=t.Class(t.Modifier,{constructor:function(t,n,i){var s=this;s.$super("constructor"),s.name="Bend",s.constraint=r,s.max=0,s.min=0,s.mid=0,s.width=0,s.height=0,s.origin=0,s.m1=null,s.m2=null,s.diagAngle=0,s.switchAxes=!1,s.force=t!==e?t:0,s.offset=n!==e?n:0,s.setAngle(i!==e?i:0)},force:0,offset:0,angle:0,diagAngle:0,max:0,min:0,mid:0,width:0,height:0,origin:0,m1:null,m2:null,switchAxes:!1,dispose:function(){var t=this;return t.force=null,t.offset=null,t.angle=null,t.diagAngle=null,t.max=null,t.min=null,t.mid=null,t.width=null,t.height=null,t.origin=null,t.m1&&t.m1.dispose(),t.m2&&t.m2.dispose(),t.m1=null,t.m2=null,t.switchAxes=null,t.$super("dispose"),t},setAngle:function(t){var e=this;return e.angle=t,e.m1=(new s).rotate(t),e.m2=(new s).rotate(-t),e},setModifiable:function(t){var e=this;return e.$super("setModifiable",t),e.max=e.switchAxes?e.mod.midAxis:e.mod.maxAxis,e.min=e.mod.minAxis,e.mid=e.switchAxes?e.mod.maxAxis:e.mod.midAxis,e.width=e.mod.getSize(e.max),e.height=e.mod.getSize(e.mid),e.origin=e.mod.getMin(e.max),e.diagAngle=o(e.width/e.height),e},apply:function(){var t=this;if(!t.force)return t;var e=t.constraint,r=t.width,s=t.offset,o=t.origin,x=t.force,d=t.max,m=t.min,y=t.mid,p=t.m1,g=t.m2,V=o+r*s,M=r/c/x,w=f*(r/(M*f)),z=1/r;return v(t.mod.vertices,function(t){var r,c,f,v,x,X=t.getValue(d),C=t.getValue(y),P=t.getValue(m),Y=p.transformPointSelf(new h(X,C));X=Y.x,C=Y.y,r=(X-o)*z,n===e&&s>=r||i===e&&r>=s||(c=l-w*s+w*r,f=u(c)*(M+P),v=a(c)*(M+P),P=f-M,X=V-v),x=g.transformPointSelf(new h(X,C)),X=x.x,C=x.y,t.setValue(d,X),t.setValue(y,C),t.setValue(m,P)}),t}})}(e),!function(t,e){"use strict";var r=t.Vector3,n=Math.max,i=Math.exp,s=t.List.each;t.Bloat=t.Class(t.Modifier,{constructor:function(){var t=this;t.$super("constructor"),t.name="Bloat",t.radius=0,t.a=.01,t.center=r.ZERO()},center:null,radius:0,a:.01,dispose:function(){var t=this;return t.center.dispose(),t.center=null,t.radius=null,t.a=null,t.$super("dispose"),t},setRadius:function(t){return this.radius=n(0,t),this},setA:function(t){return this.a=n(0,t),this},apply:function(){var t=this,e=t.center,r=t.radius,n=t.a;return s(t.mod.vertices,function(t){var s=t.getVector().subtractSelf(e),o=s.getMagnitude();s.setMagnitude(o+r*i(-o*n)),t.setVector(s.addSelf(e))}),t}})}(e),!function(t,e){"use strict";var r=t.Vector3,n=t.Matrix4,i=t.List.each;t.Twist=t.Class(t.Modifier,{constructor:function(t){var n=this;n.$super("constructor"),n.name="Twist",n.vector=new r([0,1,0]).normalizeSelf(),n.angle=t!==e?t:0,n.center=r.ZERO()},vector:null,angle:0,center:null,dispose:function(){var t=this;return t.vector.dispose(),t.vector=null,t.angle=null,t.center.dispose(),t.center=null,t.$super("dispose"),t},apply:function(){var t=this,e=t.mod,s=t.vector,o=t.angle,u=t.center,a=new r([.5*e.maxX,.5*e.maxY,.5*e.maxZ]),c=o/a.getMagnitude(),l=new n,f=new n,h=-r.dot(s,u);return i(e.vertices,function(t){var e=t.getVector(),n=c*(r.dot(e,s)+h),i=l.reset().translationMatrixFromVector(e),o=f.reset().rotationMatrixFromVector(s,n);o.multiply(i),t.setXYZ([o.n14,o.n24,o.n34])}),t}})}(e),!function(t,e){"use strict";var r=Math.abs,n=Math.pow,i=(t.XMath.sign,t.ModConstant),s=i.NONE,o=i.LEFT,u=i.RIGHT,a=i.X,c=i.Y,l=i.Z,f=t.List.each;t.Skew=t.Class(t.Modifier,{constructor:function(t){var r=this;r.$super("constructor"),r.name="Skew",r.force=t!==e?t:0,r.offset=.5,r.constraint=s,r.power=1,r.falloff=1,r.inverseFalloff=!1,r.oneSide=!1,r.swapAxes=!1,r.skewAxis=0},force:0,skewAxis:0,offset:.5,power:1,falloff:1,inverseFalloff:!1,oneSide:!1,swapAxes:!1,dispose:function(){var t=this;return t.force=null,t.skewAxis=null,t.offset=null,t.power=null,t.falloff=null,t.inverseFalloff=null,t.oneSide=null,t.swapAxes=null,t.$super("dispose"),t},setModifiable:function(t){var e=this;return e.$super("setModifiable",t),e.skewAxis=e.skewAxis||e.mod.maxAxis,e},apply:function(){var t=this,e=t.constraint,i=t.skewAxis,s=t.swapAxes,h=t.offset,v=t.oneSide,x=t.inverseFalloff,d=t.falloff,m=1-d,y=t.power,p=t.force,g=a===i?s?l:c:c===i?s?l:a:l===i?s?c:a:0;return f(t.mod.vertices,function(t){var s,a,c,l,f,V,M;V=t.getRatio(i),o===e&&h>=V||u===e&&V>h||(s=V-h,v&&(s=r(s)),a=t.getRatio(g),x&&(a=1-a),c=d+a*m,M=0>s?-1:1,l=n(r(s),y)*M,f=t.getValue(g)+p*l*c,t.setValue(g,f))}),t}})}(e),!function(t,e){"use strict";var r=t.Vector3,n=t.Matrix4,i=Math.pow,s=t.List.each;t.Taper=t.Class(t.Modifier,{constructor:function(t,n){var i=this;i.$super("constructor"),i.name="Taper",i.vector=new r([1,0,1]),i.vector2=new r([0,1,0]),i.force=t!==e?t:0,i.power=n!==e?n:1},force:0,power:1,vector:null,vector2:null,dispose:function(){var t=this;return t.vector.dispose(),t.vector2.dispose(),t.vector=null,t.vector2=null,t.force=null,t.power=null,t.$super("dispose"),t},apply:function(){var t=this,e=t.vector,r=t.vector2,o=t.force,u=t.power,a=e.xyz[0],c=e.xyz[1],l=e.xyz[2],f=new n;return s(t.mod.vertices,u>1||1>u?function(t){var e=t.getRatioVector().multiply(r),n=o*i(e.getMagnitude(),u);f.reset().scaleMatrix(1+n*a,1+n*c,1+n*l),t.setVector(f.multiplyVector(t.getVector()))}:function(t){var e=t.getRatioVector().multiply(r),n=o*e.getMagnitude();f.reset().scaleMatrix(1+n*a,1+n*c,1+n*l),t.setVector(f.multiplyVector(t.getVector()))}),t}})}(e),!function(t,e){"use strict";var r=t.Constants.invPI,n=t.Constants.doublePI,i=t.Vector3,s=t.Matrix4,o=t.List.each;t.Wheel=t.Class(t.Modifier,{constructor:function(){var t=this;t.$super("constructor"),t.name="Wheel",t.speed=0,t.turn=0,t.roll=0,t.radius=0,t.steerVector=new i([0,1,0]),t.rollVector=new i([0,0,1])},speed:0,turn:0,roll:0,radius:0,steerVector:null,rollVector:null,dispose:function(){var t=this;return t.speed=null,t.turn=null,t.roll=null,t.radius=null,t.steerVector.dispose(),t.rollVector.dispose(),t.steerVector=null,t.rollVector=null,t.$super("dispose"),t},setModifiable:function(t){var e=this;return e.$super("setModifiable",t),e.radius=.5*e.mod.width,e},apply:function(){var t=this,e=t.steerVector,r=t.turn,n=t.rollVector,i=t.roll,u=null,a=null,c=null;return t.roll+=t.speed,r?(a=(new s).rotationMatrixFromVector(e,r),c=a.multiplyVector(n.clone()),u=(new s).rotationMatrixFromVector(c,i)):u=(new s).rotationMatrixFrom(n,i),o(t.mod.vertices,a?function(t){var e=t.getVector();a.multiplyVector(e),t.setVector(u.multiplyVector(e))}:function(t){t.setVector(u.multiplyVector(t.getVector()))}),t},getStep:function(){return this.radius*this.speed*r},getPerimeter:function(){return this.radius*n}})}(e),!function(t,e){"use strict";var r=t.Vector3,n=t.Range,i=t.Matrix4,s=t.List.each;t.Break=t.Class(t.Modifier,{constructor:function(t,i){var s=this;s.$super("constructor"),s.name="Break",s.bv=new r([0,1,0]),s.range=new n(0,1),s.offset=t!==e?t:0,s.angle=i!==e?i:0},bv:null,range:null,offset:0,angle:0,dispose:function(){var t=this;return t.bv.dispose(),t.bv=null,t.range.dispose(),t.range=null,t.offset=null,t.angle=null,t.$super("dispose"),t},apply:function(){var t,e,n,o=this,u=o.mod,a=o.offset,c=o.range,l=o.angle,f=o.bv,h=f.xyz;return t=new r([0,0,-(u.minZ+u.depth*a)]),e=t.negate(),n=(new i).rotationMatrix(h[0],h[1],h[2],l),s(u.vertices,function(r){var i=r.getVector().addSelf(t);i.xyz[2]>=0&&c.isIn(r.ratio[1])&&n.multiplyVector(i),r.setVector(i.addSelf(e))}),o}})}(e),!function(t,e){"use strict";var r=t.ModConstant.NONE,n=t.ModConstant.X,i=t.ModConstant.Y,s=t.ModConstant.Z,o=(t.VecArray,Math.random),u=t.List.each;t.Noise=t.Class(t.Modifier,{constructor:function(t){var n=this;n.$super("constructor"),n.name="Noise",n.axes=r,n.start=0,n.end=0,n.force=t!==e?t:0},force:0,start:0,end:1,dispose:function(){var t=this;return t.force=null,t.start=null,t.end=null,t.$super("dispose"),t},setFalloff:function(t,r){var n=this;return n.start=t!==e?t:0,n.end=r!==e?r:1,n},apply:function(){var t=this,e=t.mod,r=~t.axes,a=t.start,c=t.end,l=t.force,f=.5*l,h=e.maxAxis;return r&&l?(u(e.vertices,function(t){var e,u,v=o()*l-f,x=t.getRatio(h);c>a?a>x?x=0:x>c&&(x=1):a>c?(x=1-x,x>a?x=0:c>x&&(x=1)):x=1,e=v*x,u=t.getXYZ(),t.setXYZ([u[0]+(r&n?e:0),u[1]+(r&i?e:0),u[2]+(r&s?e:0)])}),t):t}})}(e),!function(t,e){"use strict";var r=t.ModConstant,n=(r.NONE,r.X),i=r.Y,s=r.Z,o=t.List.each;t.DisplaceMap=t.Class(t.Modifier,{constructor:function(t,e){var r=this;r.$super("constructor"),r.name="DisplaceMap",+t==t?r.force=t||1:(r.setBitmap(t),r.force=e||1),r.offset=127,r.axes=n|i|s},width:null,height:null,bmpData:null,force:1,offset:127,dispose:function(){var t=this;return t.bmpData=null,t.width=null,t.height=null,t.force=null,t.offset=null,t.$super("dispose"),t},setBitmap:function(t){var e=this;return e.bmpData=t?t.data:null,e.width=t?t.width:0,e.height=t?t.height:0,e},apply:function(){var t=this,e=t.axes,r=t.width,u=t.height,a=t.bmpData,c=t.force,l=t.offset;return e&&a?(o(t.mod.vertices,function(t){var o,f,h,v;v=t.getXYZ(),f=~~((r-1)*t.ratio[0]),h=~~((u-1)*t.ratio[2]),o=h*r+f<<2,t.setXYZ([v[0]+(e&n?((255&a[o])-l)*c:0),v[1]+(e&i?((255&a[o+1])-l)*c:0),v[2]+(e&s?((255&a[o+2])-l)*c:0)])}),t):t}})}(e),!function(t,e){"use strict";function r(t,e,r,i,s){var o,u,a,c,l,f=e*r,h=new n(f);for(0>i&&(i+=e),0>s&&(s+=r),i=~~i,s=~~s,o=0,u=0,l=0;f>l;l++,o++)o>=e&&(o=0,u++),a=(o+i)%e,c=(u+s)%r,h[l]=t[a+c*e];return h}var n=(t.Vector3,Math.round,t.VecArray),i=t.ModConstant,s=(i.NONE,i.X),o=i.Y,u=i.Z,a=t.List.each;t.Perlin=t.Class(t.Modifier,{constructor:function(t,r,n){var i=this;i.$super("constructor"),i.name="Perlin",i.perlin=r,i.force=t||1,i.autoRun=e!==n?!!n:!0,i.axes=s|o|u},speedX:1,speedY:1,perlin:null,force:1,offset:0,autoRun:!0,dispose:function(){var t=this;return t.perlin=null,t.speedX=null,t.speedY=null,t.force=null,t.offset=null,t.autoRun=null,t.$super("dispose"),t},setSpeed:function(t,e){var r=this;return r.speedX=t,r.speedY=e,r},apply:function(){var t=this,e=t.axes,n=t.force,i=t.offset,c=t.perlin,l=c.width,f=c.height;return e&&c?(t.autoRun&&(c=t.perlin=r(c,l,f,t.speedX,t.speedY),c.width=l,c.height=f),a(t.mod.vertices,function(t){var r=t.getXYZ(),a=~~((l-1)*t.ratio[0]),h=~~((f-1)*t.ratio[2]),v=a+h*l;t.setXYZ([r[0]+(e&s?(c[v]-i)*n:0),r[1]+(e&o?(c[v]-i)*n:0),r[2]+(e&u?(c[v]-i)*n:0)])}),t):t}})}(e),!function(t,e){"use strict";var r=t.ModConstant,n=r.X,i=r.Y,s=r.Z,o=t.Vector3,u=t.VecArray,a=t.VertexThree=t.Class(t.VertexProxy,{constructor:function(t){var e=this;e.$super("constructor",t),e.name="VertexThree"},dispose:function(){var t=this;return t.$super("dispose"),t},setVertex:function(t){var e=this;return e.vertex=t,e.original=new u([t.x,t.y,t.z]),e.xyz=new u(e.original),e},getXYZ:function(){var t=this.vertex;return new u([t.x,t.y,t.z])},getX:function(){return this.vertex.x},getY:function(){return this.vertex.y},getZ:function(){return this.vertex.z},setXYZ:function(t){var e=this,r=e.vertex;return r.x=t[0],r.y=t[1],r.z=t[2],e},setX:function(t){var e=this;return e.vertex.x=t,e},setY:function(t){var e=this;return e.vertex.y=t,e},setZ:function(t){var e=this;return e.vertex.z=t,e},reset:function(){var t=this,e=t.vertex,r=t.original;return e.x=r[0],e.y=r[1],e.z=r[2],t},collapse:function(){var t=this,e=t.vertex;return t.original=new u([e.x,e.y,e.z]),t},getValue:function(t){var e=this.vertex;return n===t?e.x:i===t?e.y:s===t?e.z:0},setValue:function(t,e){var r=this.vertex;return n===t?r.x=e:i===t?r.y=e:s===t&&(r.z=e),this},setVector:function(t){var e=this,r=e.vertex,n=t.xyz;return r.x=n[0],r.y=n[1],r.z=n[2],e},getVector:function(){var t=this.vertex;return new o([t.x,t.y,t.z])}});a.prototype.getXYZRef=a.prototype.getXYZ,a.prototype.setXYZRef=a.prototype.setXYZ}(e),!function(t,e){"use strict";var r=t.VertexThree;t.FaceProxy,t.MeshThree=t.Class(t.MeshProxy,{constructor:function(t){var e=this;e.$super("constructor",t),e.name="MeshThree"},setMesh:function(t){var e=this;e.$super("setMesh",t);var n,i,t=e.mesh,s=t.geometry.vertices,o=s.length,u=t.geometry.faces;u.length;for(e.faces=null,e.vertices=n=new Array(o),i=0;o>i;i++)n[i]=new r(s[i]);return e},update:function(){var t=this,e=t.mesh.geometry;return e.verticesNeedUpdate=!0,e.elementsNeedUpdate=!0,e.uvsNeedUpdate=!0,e.normalsNeedUpdate=!0,e.colorsNeedUpdate=!0,e.lineDistancesNeedUpdate=!0,e.groupsNeedUpdate=!0,e.buffersNeedUpdate=!0,e.dynamic=!0,t},updateMeshPosition:function(t){var e=this,r=e.mesh.position,n=t.xyz;return r.x+=n[0],r.y+=n[1],r.z+=n[2],e}})}(e),!function(t,e){"use strict";var r=t.Class(t.Library3d,{constructor:function(){var e=this;e.id="Three.js",e.meshClass=t.MeshThree,e.vertexClass=t.VertexThree}});t.LibraryThree=new r}(e),!function(t,e){"use strict";var r=t.ModConstant,n=r.X,i=r.Y,s=r.Z,o=t.Vector3,u=t.VecArray,a=t.VertexOSG=t.Class(t.VertexProxy,{constructor:function(t,e){var r=this;r.geometry=t,r.$super("constructor",e),r.name="VertexOSG"},geometry:null,dispose:function(){var t=this;return t.geometry=null,t.$super("dispose"),t},setVertex:function(t){var e=this,r=e.geometry;
return e.vertex=t,e.original=new u([r[t],r[t+1],r[t+2]]),e.xyz=new u(e.original),e},getXYZ:function(){var t=this.vertex,e=this.geometry;return new u([e[t],e[t+1],e[t+2]])},getX:function(){return this.geometry[this.vertex]},getY:function(){return this.geometry[this.vertex+1]},getZ:function(){return this.geometry[this.vertex+2]},setXYZ:function(t){var e=this,r=e.vertex,n=e.geometry;return n[r]=t[0],n[r+1]=t[1],n[r+2]=t[2],e},setX:function(t){var e=this;return e.geometry[e.vertex]=t,e},setY:function(t){var e=this;return e.geometry[e.vertex+1]=t,e},setZ:function(t){var e=this;return e.geometry[e.vertex+2]=t,e},reset:function(){var t=this,e=t.vertex,r=t.geometry,n=t.original;return r[e]=n[0],r[e+1]=n[1],r[e+2]=n[2],t},collapse:function(){var t=this,e=t.geometry,r=t.vertex;return t.original=new u([e[r],e[r+1],e[r+2]]),t},getValue:function(t){var e=this,r=e.geometry,o=e.vertex;return n===t?r[o]:i===t?r[o+1]:s===t?r[o+2]:0},setValue:function(t,e){var r=this,e=r.geometry,o=r.vertex;return n===t?e[o]=e:i===t?e[o+1]=e:s===t&&(e[o+2]=e),r},setVector:function(t){var e=this,r=e.geometry,n=e.vertex,i=t.xyz;return r[n]=i[0],r[n+1]=i[1],r[n+2]=i[2],e},getVector:function(){var t=this.vertex,e=this.geometry;return new o([e[t],e[t+1],e[t+2]])}});a.prototype.getXYZRef=a.prototype.getXYZ,a.prototype.setXYZRef=a.prototype.setXYZ}(e),!function(t,e){"use strict";var r=t.VertexOSG,n=(t.FaceProxy,Math.ceil);t.MeshOSG=t.Class(t.MeshProxy,{constructor:function(t){var e=this;e.$super("constructor",t),e.name="MeshOSG"},setMesh:function(t){var e=this;e.$super("setMesh",t);var i,s,o,t=e.mesh,u=t.getVertexAttributeList().Vertex,a=u?u.getElements()||[]:[],c=a.length,l=u?u.getItemSize():0;if(e.faces=null,c>0&&l>2)for(e.vertices=i=new Array(n(c/l)),o=0,s=0;c>s;s+=l)i[o++]=new r(a,s);else e.vertices=[];return e},update:function(){var t=this;return t.mesh.dirty(),t},updateMeshPosition:function(t){var e=this,r=e.mesh.position,n=t.xyz;return r.x+=n[0],r.y+=n[1],r.z+=n[2],e}})}(e),!function(t,e){"use strict";var r=t.Class(t.Library3d,{constructor:function(){var e=this;e.id="OSG.js",e.meshClass=t.MeshOSG,e.vertexClass=t.VertexOSG}});t.LibraryOSG=new r}(e),!function(t,e){"use strict";var r=t.ModConstant,n=r.X,i=r.Y,s=r.Z,o=t.Vector3,u=t.VecArray,a=t.VertexJ3D=t.Class(t.VertexProxy,{constructor:function(t,e){var r=this;r.geometry=t,r.$super("constructor",e),r.name="VertexJ3D"},geometry:null,dispose:function(){var t=this;return t.geometry=null,t.$super("dispose"),t},setVertex:function(t){var e=this,r=e.geometry.arraysByName[a.VERTEX_POSITION].data;return e.vertex=t,e.original=new u([r[t],r[t+1],r[t+2]]),e.xyz=new u(e.original),e},getXYZ:function(){var t=this,e=t.vertex,r=t.geometry.arraysByName[a.VERTEX_POSITION].data;return new u([r[e],r[e+1],r[e+2]])},getX:function(){var t=this;return t.geometry.arraysByName[a.VERTEX_POSITION].data[t.vertex]},getY:function(){var t=this;return t.geometry.arraysByName[a.VERTEX_POSITION].data[t.vertex+1]},getZ:function(){var t=this;return t.geometry.arraysByName[a.VERTEX_POSITION].data[t.vertex+2]},setXYZ:function(t){var e=this,r=e.vertex,n=e.geometry.arraysByName[a.VERTEX_POSITION].data;return n[r]=t[0],n[r+1]=t[1],n[r+2]=t[2],e},setX:function(t){var e=this;return e.geometry.arraysByName[a.VERTEX_POSITION].data[e.vertex]=t,e},setY:function(t){var e=this;return e.geometry.arraysByName[a.VERTEX_POSITION].data[e.vertex+1]=t,e},setZ:function(t){var e=this;return e.geometry.arraysByName[a.VERTEX_POSITION].data[e.vertex+2]=t,e},reset:function(){var t=this,e=t.vertex,r=t.geometry.arraysByName[a.VERTEX_POSITION].data,n=t.original;return r[e]=n[0],r[e+1]=n[1],r[e+2]=n[2],t},collapse:function(){var t=this,e=t.vertex,r=t.geometry.arraysByName[a.VERTEX_POSITION].data;return t.original=new u([r[e],r[e+1],r[e+2]]),t},getValue:function(t){var e=this,r=e.vertex,o=e.geometry.arraysByName[a.VERTEX_POSITION].data;return n===t?o[r]:i===t?o[r+1]:s===t?o[r+2]:0},setValue:function(t,e){var r=this,o=r.vertex,u=r.geometry.arraysByName[a.VERTEX_POSITION].data;return n===t?u[o]=e:i===t?u[o+1]=e:s===t&&(u[o+2]=e),r},setVector:function(t){var e=this,r=e.vertex,n=e.geometry.arraysByName[a.VERTEX_POSITION].data,i=t.xyz;return n[r]=i[0],n[r+1]=i[1],n[r+2]=i[2],e},getVector:function(){var t=this,e=t.vertex,r=t.geometry.arraysByName[a.VERTEX_POSITION].data;return new o([r[e],r[e+1],r[e+2]])}});a.prototype.getXYZRef=a.prototype.getXYZ,a.prototype.setXYZRef=a.prototype.setXYZ}(e),!function(t,e){"use strict";var r=t.VertexJ3D,n=Math.ceil;t.FaceProxy,t.VecArray,t.MeshJ3D=t.Class(t.MeshProxy,{constructor:function(t){var e=this;r.VERTEX_POSITION=J3D.Mesh.VERTEX_POSITION,e.$super("constructor",t),e.name="MeshJ3D"},dispose:function(){var t=this;return t.$super("dispose"),t},setMesh:function(t){var e=this;e.$super("setMesh",t);var i,s,o,u=t.geometry,a=u.arraysByName[r.VERTEX_POSITION],c=a.data,l=c.length,f=a.itemSize;for(e.faces=null,e.vertices=o=new Array(n(l/f)),s=0,i=0;l>i;i+=f)o[s++]=new r(u,i);return e},update:function(){var t=this,e=t.mesh.geometry,n=e.arraysByName[r.VERTEX_POSITION],i=n.data;return e.replaceArray(n,i),t},updateMeshPosition:function(t){var e=this,r=e.mesh.position,n=t.xyz;return r.x+=n[0],r.y+=n[1],r.z+=n[2],e}})}(e),!function(t,e){"use strict";var r=t.Class(t.Library3d,{constructor:function(){var e=this;e.id="J3D",e.meshClass=t.MeshJ3D,e.vertexClass=t.VertexJ3D}});t.LibraryJ3D=new r}(e),!function(t,e){"use strict";var r=t.ModConstant,n=r.X,i=r.Y,s=r.Z,o=t.Vector3,u=t.VecArray,a=t.VertexCubicVR=t.Class(t.VertexProxy,{constructor:function(t,e){var r=this;r.sceneObject=t,r.$super("constructor",e),r.name="VertexCubicVR"},sceneObject:null,dispose:function(){var t=this;return t.sceneObject=null,t.$super("dispose"),t},setVertex:function(t){var e=this;return e.vertex=t,e.original=new u(t),e.xyz=new u(t),e},getXYZ:function(){return new u(this.vertex)},getX:function(){return this.vertex[0]},getY:function(){return this.vertex[1]},getZ:function(){return this.vertex[2]},setXYZ:function(t){var e=this,r=e.vertex;return r[0]=t[0],r[1]=t[1],r[2]=t[2],e},setX:function(t){var e=this;return e.vertex[0]=t,e},setY:function(t){var e=this;return e.vertex[1]=t,e},setZ:function(t){var e=this;return e.vertex[2]=t,e},reset:function(){var t=this,e=t.vertex,r=t.original;return e[0]=r[0],e[1]=r[1],e[2]=r[2],t},collapse:function(){var t=this;return t.original=new u(t.vertex),t},getValue:function(t){var e=this.vertex;return n===t?e[0]:i===t?e[1]:s===t?e[2]:0},setValue:function(t,e){var r=this.vertex;return n===t?r[0]=e:i===t?r[1]=e:s===t&&(r[2]=e),this},setVector:function(t){var e=this,r=e.vertex,n=t.xyz;return r[0]=n[0],r[1]=n[1],r[2]=n[2],e},getVector:function(){return new o(this.vertex)}});a.prototype.getXYZRef=a.prototype.getXYZ,a.prototype.setXYZRef=a.prototype.setXYZ}(e),!function(t,e){"use strict";var r=t.VertexCubicVR;t.FaceProxy,t.MeshCubicVR=t.Class(t.MeshProxy,{constructor:function(t){var e=this;e.$super("constructor",t),e.name="MeshCubicVR"},setMesh:function(t){var e=this;e.$super("setMesh",t);var n,i,s=t.obj.points,o=s.length,u=t.obj.faces;u.length;for(e.faces=null,e.vertices=n=new Array(o),i=0;o>i;i++)n[i]=new r(t,s[i]);return e},update:function(){var t=this;return t.mesh.dirty=!0,t},updateMeshPosition:function(t){var e=this,r=e.mesh.position,n=t.xyz;return r[0]+=n[0],r[1]+=n[1],r[2]+=n[2],e}})}(e),!function(t,e){"use strict";var r=t.Class(t.Library3d,{constructor:function(){var e=this;e.id="CubicVR.js",e.meshClass=t.MeshCubicVR,e.vertexClass=t.VertexCubicVR}});t.LibraryCubicVR=new r}(e),!function(t,e){"use strict";var r=t.ModConstant,n=r.X,i=r.Y,s=r.Z,o=t.Vector3,u=t.VecArray,a=t.VertexCopperlicht=t.Class(t.VertexProxy,{constructor:function(t,e,r){var n=this;n.node=t,n.buffer=e,n.$super("constructor",r),n.name="VertexCopperlicht"},node:null,buffer:null,dispose:function(){var t=this;return t.node=null,t.buffer=null,t.$super("dispose"),t},setVertex:function(t){var e=this,r=t.Pos;return e.vertex=t,e.original=new u([r.X,r.Y,r.Z]),e.xyz=new u(e.original),e},getXYZ:function(){var t=this.vertex.Pos;return new u([t.X,t.Y,t.Z])},getX:function(){return this.vertex.Pos.X},getY:function(){return this.vertex.Pos.Y},getZ:function(){return this.vertex.Pos.Z},setXYZ:function(t){var e=this,r=e.vertex.Pos;return r.X=t[0],r.Y=t[1],r.Z=t[2],e},setX:function(t){var e=this;return e.vertex.Pos.X=t,e},setY:function(t){var e=this;return e.vertex.Pos.Y=t,e},setZ:function(t){var e=this;return e.vertex.Pos.Z=t,e},reset:function(){var t=this,e=t.vertex.Pos,r=t.original;return e.X=r[0],e.Y=r[1],e.Z=r[2],t},collapse:function(){var t=this,e=t.vertex.Pos;return t.original=new u([e.X,e.Y,e.Z]),t},getValue:function(t){var e=this.vertex.Pos;return n===t?e.X:i===t?e.Y:s===t?e.Z:0},setValue:function(t,e){var r=this.vertex.Pos;return n===t?r.X=e:i===t?r.Y=e:s===t&&(r.Z=e),this},setVector:function(t){var e=this.vertex.Pos,r=t.xyz;return e.X=r[0],e.Y=r[1],e.Z=r[2],this},getVector:function(){var t=this.vertex.Pos;return new o([t.X,t.Y,t.Z])}});a.prototype.getXYZRef=a.prototype.getXYZ,a.prototype.setXYZRef=a.prototype.setXYZ}(e),!function(t){"use strict";var e=t.VertexCopperlicht,r=(t.FaceProxy,t.List.each);t.MeshCopperlicht=t.Class(t.MeshProxy,{constructor:function(t){var e=this;e.$super("constructor",t),e.name="MeshCopperlicht"},setMesh:function(t){var r=this;r.$super("setMesh",t);var n,i,s,o,u,a=r.mesh.getMesh().GetMeshBuffers(),c=r.vertices,l=[];for(r.faces=null,i=0,s=a.length;s>i;i++)for(l=a[i].Vertices,n=0,o=l.length;o>n;n++)u=new e(r.mesh,a[i],l[n]),c.push(u);return r},update:function(){var t=this;return r(t.mesh.getMesh().GetMeshBuffers(),function(t){t.update(!0)}),t},updateMeshPosition:function(t){var e=this,r=e.mesh.Pos,n=t.xyz;return r.X+=n[0],r.Y+=n[1],r.Z+=n[2],e}})}(e),!function(t,e){"use strict";var r=t.Class(t.Library3d,{constructor:function(){var e=this;e.id="Copperlicht",e.meshClass=t.MeshCopperlicht,e.vertexClass=t.VertexCopperlicht}});t.LibraryCopperlicht=new r}(e),!function(t,e){"use strict";var r=t.ModConstant,n=r.X,i=r.Y,s=r.Z,o=t.Vector3,u=t.VecArray,a=t.VertexPre3D=t.Class(t.VertexProxy,{constructor:function(t){var e=this;e.$super("constructor",t),e.name="VertexPre3D"},setVertex:function(t){var e=this;return e.vertex=t,e.original=new u([t.x,t.y,t.z]),e.xyz=new u(e.original),e},getXYZ:function(){var t=this.vertex;return new u([t.x,t.y,t.z])},getX:function(){return this.vertex.x},getY:function(){return this.vertex.y},getZ:function(){return this.vertex.z},setXYZ:function(t){var e=this,r=e.vertex;return r.x=t[0],r.y=t[1],r.z=t[2],e},setX:function(t){return this.vertex.x=t,this},setY:function(t){return this.vertex.y=t,this},setZ:function(t){return this.vertex.z=t,this},getValue:function(t){var e=this.vertex;switch(t){case n:return e.x;case i:return e.y;case s:return e.z}return 0},setValue:function(t,e){var r=this,o=r.vertex;switch(t){case n:o.x=e;break;case i:o.y=e;break;case s:o.z=e}return r},setVector:function(t){var e=this,r=e.vertex,n=t.xyz;return r.x=n[0],r.y=n[1],r.z=n[2],e},getVector:function(){var t=this.vertex;return new o([t.x,t.y,t.z])}});a.prototype.getXYZRef=a.prototype.getXYZ,a.prototype.setXYZRef=a.prototype.setXYZ}(e),!function(t,e){"use strict";var r=t.VertexPre3D;t.FaceProxy,t.MeshPre3D=t.Class(t.MeshProxy,{constructor:function(t){var e=this;e.$super("constructor",t),e.name="MeshPre3D"},setMesh:function(t){var e=this;e.$super("setMesh",t);var n,i,s=e.mesh.vertices,o=e.mesh.quads,u=s.length;o.length;for(e.faces=null,e.vertices=n=new Array(u),i=0;u>i;i++)n[i]=new r(s[i]);return e}})}(e),!function(t,e){"use strict";var r=t.Class(t.Library3d,{constructor:function(){var e=this;e.id="pre3d.js",e.meshClass=t.MeshPre3D,e.vertexClass=t.VertexPre3D}});t.LibraryPre3D=new r}(e),t.MOD3});